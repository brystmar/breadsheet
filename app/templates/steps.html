{% extends "recipe.html" %}

{% block steps_list %}
    <div id="steps">
        <table id="steps_list">
            <tr id="step_header_row">
                <th>Step</th>
                <th>Directions</th>
                <th>When?</th>
                <th>Then Wait...</th>
                <th>Time Range</th>
            </tr>
            
            {% for step in steps %}
                <tr id="step_row{{ step.number }}">
                    <td id="step_number{{ step.number }}">{{ step.number }}.</td>
                    <td>{{ step.text }}</td>
                    <td>{{ step.when }}</td>
                    <!--<td>{{ step.then_wait_ui[0] }}:{{ step.then_wait_ui[1] }}:{{ step.then_wait_ui[2] }}</td>-->
                    <td id="step_wait{{ step.number}}">
                        <form action="" method="POST" id="form_step_wait{{ step.number }}">
                            {{ twforms[step.number-1].then_wait_h(size=2) }}:{{ twforms[step.number-1].then_wait_m(size=2) }}:{{ twforms[step.number-1].then_wait_s(size=2) }}
                        </form>
                        
                    </td>
                    <td>{{ step.wait_time_range }}</td>
                </tr>
            {% endfor %}
        </table>
        <p></p>
        <table id="steps_time_summary">
            <tr id="step_header_row">
                <th>Start:</th>
                <td>{{ recipe.start_time }}</td>
                <td>{{ twforms[0].date }}{{ twforms[0].time }}</td>
            </tr>
            <tr id="step_header_row">
                <th>End:</th>
                <td>{{ recipe.end_time }}</td>
            </tr>
        </table>
    </div>

    {% if not sform %}
        <!-- hide this link when the Add Step form is displayed -->
        <div id="ask_add_step">
            <p><a href="/add_step?id={{ recipe.id }}">Click to add a step</a></p>
        </div>
    {% endif %}

    {% block add_step %}
    {% endblock %}

{% endblock %}