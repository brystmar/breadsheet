<div class="container-fluid" id="steps_div">
    <table id="steps_list" class="table table-responsive table-striped">
        <thead>
            <th>Step</th>
            <th>When</th>
            <th>Directions</th>
            <th>Then Wait...</th>
            <th>Notes</th>
        </thead>

        {% for step in steps %}
            <tr id="step_row{{ step.number }}">
                <td id="step_number{{ step.number }}">{{ step.number }}.</td>
                <td id="step_when{{ step.number }}" class="step_when">{{ step.when }}</td>
                <td id="step_text{{ step.number }}">{{ step.text }}</td>
                <td id="step_wait{{ step.number }}">
                    {% for tw in twforms %}
                        {% if tw.step_number == step.number %}
                            {{ tw.then_wait_h(size=2, id="then_wait_h{}".format(step.number)) }} h &nbsp;{{
                                tw.then_wait_m(size=2, id="then_wait_m{}".format(step.number)) }} m
                        {% endif %}
                    {% endfor %}
                </td>
                <td id="step_note{{ step.number }}">{{ step.note }}</td>
            </tr>
        {% endfor %}
    </table>
</div>

<script>
    // add event listeners to each then_wait input box
    var steps_table = document.getElementById("steps_list");
    var step_input_tags = steps_table.getElementsByTagName("input");

    for (var i=1; i <= step_input_tags.length / 2; i++) {
        document.getElementById("then_wait_h" + i).addEventListener("change", calcTime);
        document.getElementById("then_wait_m" + i).addEventListener("change", calcTime);
    }
</script>
